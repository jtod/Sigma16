#+INCLUDE: ../VersionMacro.org
#+TITLE: Sigma16 User Guide
#+AUTHOR: John T. O'Donnell
#+DATE: {{{S16version()}}}

# Top level document for typesetting Sigma16 User Guide standalone.
# John T. O'Donnell, 2024

# This file is part of Sigma16: https://github.com/jtod/Sigma16.
# License: GNU GPL Version 3 or later. See Sigma16/README.md,
# LICENSE.txt.

# Sigma16 is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License, Version 3, as
# published by the Free Software Foundation.  Sigma16 is distributed
# in the hope that it will be useful, but WITHOUT ANY WARRANTY;
# without even the implied warranty of MERCHANTABILITY or FITNESS FOR
# A PARTICULAR PURPOSE.  See the GNU General Public License for more
# details.  You should have received a copy of the GNU General Public
# License along with Sigma16.  If not, see
# <https://www.gnu.org/licenses/>.

# Prepare release
#   Edit  Sigma16UserGuideText.org
#   Build VERSION.txt and VersionMacro.org: cd $SIGMA16; make setVersion
#   Build html: ctl-c ctl-e h h
#   Build tex: ctl-c ctl-e l l
#   Build pdf: cd docs/Userguide; pdflatex --shell-escape Sigma16UserGuide
#   Build VERSION.txt, then both html and pdf for this document

# .emacs.d/init.el configures org-export-filter-options-functions to
# set different section number formatting for html and latex.  For
# html, generate contents without section numbers.  For latex,
# generate contents with section numbers, and redefine \numberline to
# suppress those when the toc is generated.  The modified contents for
# latex is in a scope environment; it goes after Title and before
# Introduction.

#+MACRO: S16Version (Version/Date disabled for section export)
# Redefinition to prevent error/abort on export.

# When the entire document is exported, the redefinition of S16version
# (which is included at the top of the file) is ignored because of
# INCLUDING ../VersionMacro.org.  (When a macro is defined twice, the
# second definition is ignored.)  When only a section is exported, the
# INCLUDE is skipped, and the second MACRO definition prevents an
# error message (undefined macro) from aborting the export.

# Redundant
# Provide appropriate code for svg figure depending on export backend
# See org-export-global-macros defined in ox.el and changed in init.el  NO
#  #+MACRO: FIGURES ./figures/ redundant ??
#  #+MACRO: svgfigHTML [[./figures/svg/$1.svg]]
#  #+MACRO: svgfigLaTeX \includesvg{$1}
#  #+MACRO: svgfig (eval (if (eq org-export-current-backend 'latex) (concat "\\includesvg\{" $1 "\}")  (concat "[[./figures/svg/" $1 ".svg]]")))

# html
# To generate html: C-c C-e h h (export to html)

# LaTeX
# To generate latex: C-c C-e l l (export to latex file)
# To generate pdf: C-c C-e l p (export to pdf)
#+LATEX_CLASS: article
#+LATEX_CLASS_OPTIONS: [a4paper,12pt]
#+LATEX_HEADER: \usepackage{sigma16}
#+LATEX_HEADER: \usepackage[margin=3.5cm]{geometry}
# 12pt text and 3.5cm margins give about 72 characters per line
#+LATEX_HEADER: \usepackage{hyperref}
#+LATEX_HEADER: \usepackage{makeidx}
#+LATEX_HEADER: \usepackage{svg}
#+LATEX_HEADER: \svgpath{{figures/svg/}}
#+LATEX_HEADER: \makeindex
#+BEGIN_EXPORT latex
\tableofcontents
#+END_EXPORT

{{{S16version()}}}

#+INCLUDE: Sigma16UserGuideText.org
** GPL3 license
#+INCLUDE: LICENSE.txt
\printindex
