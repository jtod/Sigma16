% compsys.sty

% Style to be used for both individual chapters and the full book

% John T. O'Donnell, 2025

% Use documentclass svmono

% load hyperref, cleverref after this file

% added in Sigma16 user guide...

% configure tikz
\usepackage{tikz}
% \usepackage{standalone}
\usetikzlibrary{calc}

%-----------------------------------------------------------------
% Other packages
\usepackage{amsmath}
\usepackage{verbatim,framed}
\usepackage[style=alphabetic,sorting=nty]{biblatex}
\addbibresource{compsys.bib}
\usepackage{graphicx}
\usepackage{makeidx} \makeindex
\usepackage{xcolor}
\usepackage{fancyvrb}
\usepackage{fvextra}
\usepackage{environ}
\usepackage{tcolorbox}
\usepackage{hyperref}

% copied from Sigma16.sty to compsys.sty

\newenvironment{majornote}
{\begin{tcolorbox}[colframe=red,colback=green!5!white,boxrule=0.6pt]}
{\end{tcolorbox}}

\newenvironment{InstructionTable}
{}
{}

% -----------------------------------------------------------------
\newenvironment{BUILD_ID}
{\smallskip\par\noindent}
{\smallskip}

%-----------------------------------------------------------------
% Typesetting identification elements


% Environment to put content into a box
\newenvironment{CodeBox}
  {\VerbatimEnvironment
    \begin{tcolorbox}[colback=black!5!white, colframe=red!75,
      boxrule=0.8pt, arc=2pt, left=4pt, right=4pt, top=4pt, bottom=4pt]
   \begin{Verbatim}[fontsize=\small, frame=none, commandchars=\\\{\}]}%
  {\end{Verbatim}
   \end{tcolorbox}}

\newenvironment{DEVBOX}
  {\VerbatimEnvironment
    \begin{tcolorbox}[colback=black!5!white, colframe=red!75,
      boxrule=0.8pt, arc=2pt, left=4pt, right=4pt, top=4pt, bottom=4pt]
   \begin{Verbatim}[fontsize=\small, frame=none, commandchars=\\\{\}]}%
  {\end{Verbatim}
   \end{tcolorbox}}
 
% \newenvironment{DEVBOX}
% {\vspace{1.5em}\color{red}\hrule\vspace{0.75em}}
% {\vspace{0.75em}\hrule\vspace{1.5em}}

\newenvironment{CHAPTERNAME}
{\begin{center}}
{\end{center}}
    
\newenvironment{AUTHOR}
{\begin{center}}
{\end{center}}
    
\newenvironment{VERSION}
{\begin{center}}
{\end{center}}

\newenvironment{READERNOTE}
{\begin{center}}
{\end{center}}

\newcommand{\TitleColor}[0]{black}
\newenvironment{TitleSection}
{\centering}
{}
\newenvironment{TitleSectionTitle}
{\par\huge\color{blue}}
{\vspace{0.5em}}
\newenvironment{TitleSectionAuthor}
{\par\large\color{green}}
{\vspace{0.5em}}
\newenvironment{TitleSectionVersionDate}
{\par\large\color{orange}}
{}

%-----------------------------------------------------------------
% Book structure: sections etc

% \renewcommand{\subsection}[1]{\textbf{\large #1}}
% \renewcommand{\subsubsection}[1]{\textbf{#1}}

%-----------------------------------------------------------------
% Exercises and solutions

\newif\ifhideSOLUTION

% Default is to show solution after corresponding exercise; this
% is useful for writing the book.  For publication, the solutions
% should not appear after the exercise, but only in the solution
% section at the end of the chapter.  To hide the solutions after
% the exercises (for publication), uncomment the following:

% \hideSOLUTIONtrue

% If we are hiding solutions after exercises, change the SOLUTION
% environment to become equal to the hide environment.  Otherwise,
% define a new SOLUTION environment.

\ifhideSOLUTION
  \NewEnviron{hide}{}
  \let\SOLUTION\hide
  \let\ENDSOLUTION\endhide
\else
  \newenvironment{SOLUTION}
    {\par\noindent}
    {\par}
\fi

% A whole group of exercises:
\newenvironment{EXERCISES}
{\subsection*{Exercises}}
{}

% Each exercise appears in this environment
\newenvironment{EXERCISE}
 {\par\noindent}
 {\par}

% Environment for all the solutions at the end of a chapter
\newenvironment{SOLUTIONS}
{\subsection*{Solutions}}
{}

% The elisp code changes the SOLUTION environment to SHOW_SOLUTION
% for the saved solutions to show at end of chapter
\newenvironment{SHOW_SOLUTION}
 {\par\noindent}
 {\par}

%-----------------------------------------------------------------
% Special structural elements: boxes, asides, etc

\newcommand{\stress}[1]{{\textcolor{red}#1}}
% \newcommand{\important}[1]{{\textcolor{red}#1}}
\newcommand{\alert}[1]{{\textcolor{red}#1}}
 
\newenvironment{boxnote}
{BEGIN BOXNOTE}
{END BOXNOTE}

\newenvironment{essay}{\textbf{Begin essay}}{\textbf{End essay}}

% Asides and notes

\newcommand{\AsideNote}{{AsideNote}}
\newenvironment{\AsideNote}
{}
{}

%-----------------------------------------------------------------
% Code listings

% Code listings.  Use Verbatim, set color for pdf, set div
% for html, and can match for extract program

% This version is specifically for lwarp, it uses BlockClass

\newenvironment{CodeListing}
{\color{black}\BlockClass{CodeListing}%
  \Verbatim[highlightcolor=blue!5,highlightlines={1-100}]}
{\endVerbatim\endBlockClass}

% light green color #D2FEE2
% light blue color #E6FFFF}
\definecolor{CodeBackgroundColor}{HTML}{E6FFFF}
\definecolor{TangleBackgroundColor}{HTML}{D2FEE2}

\renewenvironment{CodeListing}[1][CodeBackgroundColor]%
{%
\definecolor{shadecolor}{named}{#1}%
% suppress ugly vertical space which is inserted by
% environment above and below text:
\topsep=0ex\relax
\shaded
}%
{%
\endshaded
}%

% \newenvironment{HydraLive}[1][yellow]%
\newenvironment{HydraLive}[1][TangleBackgroundColor]%
{%
\definecolor{shadecolor}{named}{#1}%
% suppress ugly vertical space which is inserted by
% environment above and below text:
\topsep=0ex\relax
\shaded
}%
{%
\endshaded
}%

\newenvironment{code}{\textbf{Begin code}}{\textbf{End code}}

%-----------------------------------------------------------------
% Graphics

% \newcommand{\includesvg}[1]{SVG{#1}}
% Definitions needed for figures/tikz/tikz-book-figures/...
% Needed for .../fig2.5.tex
\newcommand{\minus}{\raisebox{0.96pt}{-}}

\newcommand{\sigcode}[1]{\texttt{#1}}
\newcommand{\codesnippet}[1]{\texttt{#1}}

%-----------------------------------------------------------------
% Symbols
  
\newcommand{\fcnname}[1]{fcnname{#1}}
\newcommand{\newsig}[1]{newsig{#1}}
\newcommand{\weblink}[1]{\texttt{#1}}
\newcommand{\invgate}[3]{invgate{#1}{#2}{#3}}
\newcommand{\andtwogate}[3]{invgate{#1}{#2}{#3}}
\newcommand{\inputlabel}[2]{invgate{#1}{#2}}
\newcommand{\outputlabel}[2]{invgate{#1}{#2}}
\newcommand{\wassubbottom}[1]{{#1}}
\newcommand{\wasincludegraphics}[1]{\textbf{#1}}

%-----------------------------------------------------------------
% Deprecated

\begin{comment}
\newenvironment{OldCodeListing}
{\pagecolor{yellow}\bgroup}
{\egroup\pagecolor{white}}
\newenvironment{Code}
{\color{green}}
{}
%\renewenvironment{CodeListing}
%{\color{black}%
%  \Verbatim[highlightcolor=blue!5,highlightlines={1-100}]}
%{\endVerbatim}

% \newenvironment{lemma}{begin lemma}{end lemma}
% \newenvironment{theorem}{begin theorem}{end theorem}
% \newenvironment{proof}{begin proof}{end proof}

%--------------------------------------------------------------
% Exercises and solutions
%--------------------------------------------------------------

% \newenvironment{exercise}
%   {\textbf{Begin exercise.}}
%   {\textbf{End exercise.}}
% \newenvironment{solution}
%   {\textbf{Begin solution.}}
%   {\textbf{End solution.}}

\end{comment}
